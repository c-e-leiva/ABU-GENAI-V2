# ü§ñ ABU-GENAI-V2 ‚Äì Asistente Conversacional con IA Generativa  
> Evoluci√≥n conversacional con GPT-4 Turbo, voz y acompa√±amiento emocional
> üîÅ Este proyecto es una evoluci√≥n del asistente [ABU-IA-Generativa (v1)](https://github.com/c-e-leiva/ABU-IA-Generativa)


![GPT-4 Turbo](https://img.shields.io/badge/GPT--4-Turbo-%237235c9?style=for-the-badge&logo=openai&logoColor=white)
![Python](https://img.shields.io/badge/Python-3.10-blue?style=for-the-badge&logo=python&logoColor=white)
![Streamlit](https://img.shields.io/badge/Streamlit-App-%23FF4B4B?style=for-the-badge&logo=streamlit&logoColor=white)

üéß **Prob√° ABU en vivo:**  
[![Probar ABU en Streamlit](https://img.shields.io/badge/Probar_ABU-Streamlit_App-%23FF4B4B?style=for-the-badge&logo=streamlit&logoColor=white)](https://abu-genai-v2.streamlit.app)


<p align="center">
  <img src="assets/img/logo.png" alt="ABU Logo" width="200"/>
</p>

---

---

## üìã √çndice

1. [¬øQu√© es ABU?](#qu√©-es-abu)  
2. [Novedades en la versi√≥n 2](#novedades-en-la-versi√≥n-2)  
3. [Funcionalidades principales](#funcionalidades-principales)  
4. [Objetivo](#objetivo)  
5. [Estructura del Proyecto](#estructura-del-proyecto)  
6. [Requisitos previos](#requisitos-previos)  
7. [Instalaci√≥n y ejecuci√≥n](#instalaci√≥n-y-ejecuci√≥n)  
8. [Diagrama de Arquitectura](#diagrama-de-arquitectura)  
9. [Manejo de errores y logs](#manejo-de-errores-y-logs)  
10. [Seguridad y privacidad](#seguridad-y-privacidad)  
11. [Futuras mejoras y roadmap](#futuras-mejoras-y-roadmap)  
12. [Ejemplos de conversaci√≥n y datos](#ejemplos-de-conversaci√≥n-y-datos)  
13. [Documentaci√≥n T√©cnica](#documentaci√≥n-t√©cnica)  
14. [Sobre el Autor y el Proyecto](#sobre-el-autor-y-el-proyecto)

---

## ¬øQu√© es ABU?

**ABU** es un asistente virtual conversacional desarrollado en Python que utiliza **inteligencia artificial generativa (GPT-4 Turbo)** para brindar acompa√±amiento emocional, informaci√≥n √∫til, recordatorios y asistencia diaria.  
Adem√°s, **incorpora LangChain** para mantener el contexto de la conversaci√≥n y detectar situaciones cr√≠ticas de forma din√°mica.

Est√° dise√±ado especialmente para adultos mayores, pero puede adaptarse a cualquier usuario. Ofrece un di√°logo c√°lido, emp√°tico y personalizado, con soporte por voz y texto.

---

## Novedades en la versi√≥n 2

- Migraci√≥n a **GPT-4 Turbo** para mejor rendimiento y personalizaci√≥n.  
- Integraci√≥n con **Google Cloud Text-to-Speech** para respuestas en voz natural.  
- Soporte para entrada por **voz** mediante Speech-to-Text.  
- Reestructura modular para mayor mantenibilidad.  
- Incorporaci√≥n de **LangChain** para gestionar la memoria conversacional y detecci√≥n de emergencias mediante flujos din√°micos.
- Flujo conversacional adaptativo con detecci√≥n de emociones.  
- Comandos contextuales para clima, noticias y recordatorios.  
- Bot√≥n para eliminar audios generados por cada mensaje.  
- Preparado para escalar usando Google Sheets como almacenamiento inicial.

---

## Funcionalidades principales

- **Conversaci√≥n emp√°tica:** respuestas personalizadas seg√∫n perfil y estado emocional.  
- **Lectura por voz:** s√≠ntesis de voz para respuestas.  
- **Entrada por voz:** permite hablar para interactuar con ABU.  
- **Noticias y clima:** acceso a informaci√≥n actualizada seg√∫n ubicaci√≥n.  
- **Recordatorios:** gesti√≥n personalizada de actividades y alertas.  
- **Emergencia:** env√≠a mensajes de ayuda con ubicaci√≥n a contactos configurados.


---

## Objetivo

Mejorar la calidad de vida de los usuarios mediante un asistente virtual que escucha, conversa y acompa√±a. El proyecto acerca la inteligencia artificial a personas con necesidades reales, especialmente adultos mayores.


---

## Estructura del Proyecto

```
ABU-GENAI-V2/
‚îÇ
‚îú‚îÄ‚îÄ .env                         Variables de entorno con claves API y configuraciones privadas (no incluido)
‚îú‚îÄ‚îÄ .gitignore                   Lista de archivos y carpetas ignoradas por Git
‚îú‚îÄ‚îÄ README.md                    Documentaci√≥n principal del proyecto
‚îú‚îÄ‚îÄ requirements.txt             Lista de dependencias necesarias para ejecutar la app
‚îú‚îÄ‚îÄ app.py                       Archivo principal que lanza la aplicaci√≥n Streamlit
‚îÇ
‚îú‚îÄ‚îÄ data/                        Datos exportados, backups y archivos temporales
‚îÇ
‚îú‚îÄ‚îÄ assets/                      Recursos est√°ticos (im√°genes, √≠conos, audios)
‚îÇ   ‚îî‚îÄ‚îÄ abu_logo.png             Logo del asistente ABU
‚îÇ
‚îú‚îÄ‚îÄ credentials/                 Credenciales de servicios externos (no incluidas por seguridad)
‚îÇ   ‚îú‚îÄ‚îÄ gcp-tts-credentials.json      Claves para Text-to-Speech (Google Cloud).
‚îÇ   ‚îî‚îÄ‚îÄ gcp-sheets-credentials.json   Claves para Google Sheets API.  
‚îÇ
‚îú‚îÄ‚îÄ core/                        L√≥gica central del asistente
‚îÇ   ‚îú‚îÄ‚îÄ prompt_manager.py        Generaci√≥n y control del flujo de prompts
‚îÇ   ‚îú‚îÄ‚îÄ openai_service.py        Integraci√≥n con API de OpenAI
‚îÇ   ‚îú‚îÄ‚îÄ memoria.py               gesti√≥n de memoria conversacional del asistente usando LangChain
‚îÇ   ‚îî‚îÄ‚îÄ detectar_emergencia.py   detectar situaci√≥n de emergencia del usuario
‚îÇ
‚îú‚îÄ‚îÄ features/                    Funcionalidades principales accesibles desde la interfaz
‚îÇ   ‚îú‚îÄ‚îÄ conversacion.py          M√≥dulo de conversaci√≥n con el asistente
‚îÇ   ‚îú‚îÄ‚îÄ noticias.py              Consulta del clima y noticias locales
‚îÇ   ‚îú‚îÄ‚îÄ recordatorio.py          Gesti√≥n de recordatorios Personales
‚îÇ   ‚îú‚îÄ‚îÄ emergencia.py            Gesti√≥n de contactos de emergencia
‚îÇ   ‚îî‚îÄ‚îÄ configuracion.py         Configuraci√≥n del perfil del usuario
‚îÇ
‚îú‚îÄ‚îÄ services/                    Servicios externos de entrada y salida de voz
‚îÇ   ‚îú‚îÄ‚îÄ stt.py                   Conversi√≥n de voz a texto (Speech-to-Text)
‚îÇ   ‚îî‚îÄ‚îÄ tts.py                   Conversi√≥n de texto a voz (Text-to-Speech)
‚îÇ
‚îú‚îÄ‚îÄ storage/                     Almacenamiento y Exportaci√≥n de Datos
‚îÇ   ‚îú‚îÄ‚îÄ resumen_historial.py     Genera resumen de la conversaci√≥n para su exportaci√≥n
‚îÇ   ‚îú‚îÄ‚îÄ perfil_usuario.py        Gesti√≥n del perfil del usuario
‚îÇ   ‚îî‚îÄ‚îÄ exportar_sheets.py       Exporta el perfil completo y resumen a Google Sheets
‚îÇ
‚îú‚îÄ‚îÄ users/                       Datos y l√≥gica relacionados a los usuarios
‚îÇ   ‚îú‚îÄ‚îÄ estado_emocional.py      An√°lisis emocional del usuario
‚îÇ   ‚îî‚îÄ‚îÄ perfiles_precargados.py  Perfiles de usuarios precargados (Rosa, Pedro, Juan).
‚îÇ
‚îú‚îÄ‚îÄ access/                      M√≥dulos relacionados al inicio de sesi√≥n
‚îÇ   ‚îî‚îÄ‚îÄ login.py                 Interfaz y l√≥gica para el acceso de usuarios.
‚îÇ
‚îú‚îÄ‚îÄ .streamlit/                  Configuraci√≥n de Streamlit (archivo no incluido)
‚îÇ   ‚îî‚îÄ‚îÄ config.toml
‚îÇ
‚îú‚îÄ‚îÄ docs/                        Documentaci√≥n t√©cnica (ver secci√≥n final para acceder)
‚îÇ
‚îî‚îÄ‚îÄ venv/                        Entorno virtual (no incluido)
```
---


## ‚úÖ Requisitos previos

- Python 3.10 o superior.  
- Acceso a APIs: OpenAI GPT-4 Turbo, Google Cloud Text-to-Speech, Google Sheets, OpenWeather.  
- Librer√≠as indicadas en `requirements.txt`.

---

## üöÄ Instalaci√≥n y ejecuci√≥n

1. Clonar el repositorio.  
2. Crear y activar un entorno virtual Python.  
3. Instalar dependencias con `pip install -r requirements.txt`.   
4. Configurar las credenciales y variables de entorno:

- Colocar los archivos JSON con credenciales de Google Cloud dentro de la carpeta `credentials/` (no incluidos en el repositorio):
  - `gcp-tts-credentials.json` para Text-to-Speech  
  - `gcp-sheets-credentials.json` para Google Sheets API  

- A√±adir las claves API necesarias en el archivo `.streamlit/config.toml` bajo la secci√≥n `[secrets]`, por ejemplo:

```
OPENAI_API_KEY="tu_api_key_aqui"
OPENWEATHER_API_KEY="tu_api_key_aqui"
NOTICIAS_API_KEY="tu_api_key_aqui"
OTHER_API_KEY=...
```

5. Ejecutar la aplicaci√≥n con Streamlit (`streamlit run app.py`).

---

## Diagrama de Arquitectura

> Arquitectura funcional y modular del asistente ABU.

![Arquitectura ABU](assets/img/arquitectura_ABU_v2.PNG)

---

### üîç Descripci√≥n de las capas

#### üßç USUARIO  
El punto de inicio. El usuario final accede a la aplicaci√≥n mediante un **navegador web**, utilizando la interfaz desarrollada en Streamlit.

#### üé® INTERFAZ  
Compuesta por `app.py`, `login.py` y `estado_emocional.py`, esta capa gestiona la experiencia de usuario: visualizaci√≥n, navegaci√≥n, ingreso y configuraci√≥n b√°sica del estado emocional.  
Es la puerta de entrada hacia el resto del sistema.

#### üõ† M√ìDULOS  
Son funcionalidades accesibles directamente desde la interfaz. Cada m√≥dulo es independiente y maneja una tarea espec√≠fica:
- `conversacion.py`: di√°logo principal con el asistente.  
- `recordatorio.py`: agenda personalizada.  
- `noticias.py`: acceso a clima y noticias.  
- `emergencia.py`: alertas a contactos definidos.  
- `configuracion.py`: preferencias y ajustes del usuario.

#### üß† N√öCLEO  
Aqu√≠ se orquesta el flujo conversacional, la l√≥gica central del asistente y las funcionalidades m√°s complejas.  
Incluye:
- `prompt_manager.py`: gesti√≥n de mensajes e instrucciones al modelo.
- `openai_service.py`: conexi√≥n con la API de OpenAI.
- `memoria.py`: memoria conversacional del usuario (implementada con **LangChain**).
- `detectar_emergencia.py`: eval√∫a si una situaci√≥n requiere activar protocolo de emergencia (usa **LangChain**).

#### üåê SERVICIOS EXTERNOS  
Integraciones que expanden las capacidades del asistente:
- `tts.py` / `stt.py`: conversi√≥n de texto a voz y voz a texto.
- **OpenAI GPT-4 / 3.5**: generaci√≥n de respuestas naturales.
- **Google Cloud TTS**: s√≠ntesis de voz.
- **Google Sheets API**: almacenamiento inicial de datos estructurados.
- **OpenWeather API**: clima en tiempo real.
- **RSS Noticias**: acceso a noticias actuales.
- `credentials/`: credenciales necesarias para autenticar los servicios.

#### üóÑ ALMACENAMIENTO Y EXPORTACI√ìN DE DATOS  
Centraliza todo lo necesario para guardar, estructurar o exportar informaci√≥n:
- `perfil_usuario.py`: consolida todos los datos del usuario.
- `exportar_sheets.py`: env√≠a los datos del perfil y conversaci√≥n a Google Sheets.
- `resumen_historial.py`: genera un resumen afectivo de la conversaci√≥n para an√°lisis o revisi√≥n posterior.


---

## Manejo de errores y logs

- El sistema captura errores comunes (fallas en conexi√≥n con APIs, errores en s√≠ntesis de voz, etc.) y muestra mensajes claros al usuario para mejorar la experiencia.  

---

## Seguridad y privacidad

- Las claves API y credenciales se almacenan localmente en archivos `.env` y `credentials/` que no se incluyen en el repositorio para proteger la informaci√≥n sensible.  
- No se almacena informaci√≥n sensible del usuario de forma permanente sin consentimiento.  

---

## Futuras mejoras y roadmap

| Mejora                        | Descripci√≥n                                              |
| ----------------------------- | -------------------------------------------------------- |
| Persistencia en base de datos | Migrar almacenamiento a Firestore o PostgreSQL           |
| Integraci√≥n continua          | Automatizar pruebas y despliegues                        |
| Interfaces m√≥viles            | Desarrollar apps nativas o Progressive Web App           |
| Accesibilidad mejorada        | Lectura autom√°tica, botones grandes, navegaci√≥n sencilla |
| Soporte multiling√ºe           | A√±adir idiomas adicionales                               |
| Seguimiento emocional         | Registro y an√°lisis hist√≥rico de estados emocionales     |


---

## Ejemplos de conversaci√≥n y datos

**üí¨ Simulaci√≥n de interacci√≥n:**  

- **Usuario:** Hola Abu, ¬øc√≥mo est√°s hoy?  
- **ABU:** ¬°Hola! üòä Qu√© lindo recibir tu mensaje. Estoy bien, gracias por preguntar. ¬øY vos, c√≥mo est√°s hoy? Record√° que estoy ac√° para acompa√±arte siempre üíô  
- **Usuario:** Estoy bien, gracias. ¬øPod√©s contarme las noticias del d√≠a?  
- **ABU:** Claro. Estas son algunas de las noticias principales de hoy:  
  - El gobierno anunci√≥ nuevas medidas econ√≥micas para los pr√≥ximos meses.  
  - Avances importantes en investigaciones sobre energ√≠as renovables.  
  - ¬°Y buenas noticias! El equipo local gan√≥ el campeonato nacional ‚öΩüéâ  
- **Usuario:** Qu√© bueno. ¬øY c√≥mo est√° el clima en Buenos Aires?  
- **ABU:** Hoy es viernes y son las 17:30 hs. En Buenos Aires est√° nublado, con una temperatura de aproximadamente 18¬∞C.
- **Usuario:** Abu, necesito ayuda urgente.  

- *(Mensaje enviado al contacto de emergencia ‚Üí)*  

  **üö® Hola, soy ABU, el asistente virtual de *Usuario*.**  
  Est√° necesitando tu ayuda urgente y te tiene como contacto de emergencia.  
  üìç Su Ubicaci√≥n estimada es: *Ubicacion del Usuario*  

- **ABU:** Ya envi√© un aviso a tu contacto de emergencia.  
  Manten√© la calma, tu contacto ya fue notificado y te ayudar√° lo antes posible.  
  ¬øQuer√©s que reenv√≠e la alerta? ¬øs√≠ - no?  

- **Usuario:** No, gracias Abu.  
- **ABU:** Perfecto, salimos del modo de emergencia. Estoy ac√° si necesit√°s otra cosa. üíô


**Perfil de usuario ejemplo:**

| Nombre | Edad | Provincia | Estado Emocional | Vive Solo | Dificultades         | Preferencias                   |
|--------|------|-----------|------------------|-----------|----------------------|--------------------------------|
| Rosa   | 72   | Santa Fe  | Pensante         | S√≠        | Memoria, Audici√≥n    | Noticias, Clima, Recordatorios |

**Recordatorios ejemplo:**

| Descripci√≥n           | Fecha       | Hora  |
|-----------------------|-------------|-------|
| Tomar la medicaci√≥n   | 12/07/2025  | 08:00 |
| Llamar a Claudia      | 13/07/2025  | 18:30 |


---

## Documentaci√≥n T√©cnica  
Toda la documentaci√≥n t√©cnica del proyecto est√° disponible en la carpeta [`/docs`](docs/), organizada por secciones tem√°ticas:  
üìÑ [Ir al √≠ndice t√©cnico](docs/index.md)

---

## Sobre el Autor y el Proyecto

### üß† Identidad del proyecto  
**ABU** es la sigla de *Asistente de Bienestar √önico*.  
El nombre, el concepto y el logo del asistente son originales y fueron creados por el autor del proyecto.  
ABU est√° pensado como un puente humano entre tecnolog√≠a y bienestar emocional, especialmente para personas mayores o con necesidades de acompa√±amiento.

### ‚öñÔ∏è Propiedad intelectual  
Este proyecto fue desarrollado de forma independiente por **Carlos Ezequiel Leiva**.  
El nombre, el logo y el dise√±o funcional de ABU est√°n protegidos por derechos de autor.  
Queda prohibida su reproducci√≥n, redistribuci√≥n o comercializaci√≥n sin autorizaci√≥n expl√≠cita del autor.  
Para consultas, colaboraciones o licencias, pod√©s escribir a: **xc.leiva@gmail.com**


### üë§ Contacto  
**Autor:** Carlos Ezequiel Leiva  
üìç Buenos Aires, Argentina  
üîó [LinkedIn](https://www.linkedin.com/in/c-e-leiva)  
üìß xc.leiva@gmail.com
